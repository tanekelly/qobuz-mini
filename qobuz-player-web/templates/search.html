@defer (base.html; active_page="Search"; playing_info=playing_info) {
  <div class="flex flex-col">
    <div
      class="pt-safe-or-4 sticky top-0 flex max-h-full grow flex-col gap-4 bg-black/80 pb-2 backdrop-blur"
    >
      <div class="flex flex-row items-center gap-4">
        <input
          id="query"
          name="query"
          class="w-full rounded bg-white p-2 text-black"
          autocapitalize="off"
          autocomplete="off"
          autocorrect="off"
          placeholder="Search"
          spellcheck="false"
          type="search"
          oninput="setSearchQuery(this.value)"
          hx-preserve
          hx-post=""
          hx-trigger="input changed delay:500ms, keyup[key=='Enter']"
          hx-target="#search-content"
          hx-swap="outerHTML"
        />
        <span class="size-8">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="100%" height="100%">
            <path fill-rule="evenodd" fill="currentColor" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd" />
          </svg>
        </span>
        <script>
          loadSearchInput();
        </script>
      </div>

      <div
        class="flex justify-between *:rounded-full *:px-2 *:py-1 *:transition-colors"
      >
        <a
          id="albums-tab"
          href="albums?query={{ search_results.query }}"
          class="@if(tab == 'albums'){bg-blue-800}"
          preload="mouseover"
          preload-images="true"
        >
          Albums
        </a>
        <a
          id="artists-tab"
          href="artists?query={{ search_results.query }}"
          class="@if(tab == 'artists'){bg-blue-800}"
          preload="mouseover"
          preload-images="true"
        >
          Artists
        </a>
        <a
          id="playlists-tab"
          href="playlists?query={{ search_results.query }}"
          class="@if(tab == 'playlists'){bg-blue-800}"
          preload="mouseover"
          preload-images="true"
        >
          Playlists
        </a>
        <a
          id="tracks-tab"
          href="tracks?query={{ search_results.query }}"
          class="@if(tab == 'tracks'){bg-blue-800}"
          preload="mouseover"
          preload-images="true"
        >
          Tracks
        </a>
      </div>
    </div>

    @defer (search-content.html; tab=tab; search_results=search_results) {}
  </div>
}

@defer (base.html; playing_info=playing_info) {
  <div class="flex flex-col gap-8">
    <div
      id="title" class="sticky top-0 flex max-h-full grow flex-col gap-4 bg-black/80 backdrop-blur"
    >
      <h1 class="text-2xl">Create playlist</h1>
    </div>

    <form
      hx-post="/playlist/create"
      hx-trigger="submit"
      hx-swap="none"
      class="mx-auto max-w-md space-y-4 rounded-xl bg-gray-900 p-6 text-gray-100 shadow-lg"
    >
      <div>
        <label for="name" class="block font-semibold">Playlist Name</label>
        <input
          type="text"
          id="name"
          name="name"
          required
          class="w-full rounded-lg border border-gray-700 bg-gray-800 px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        />
      </div>

      <div>
        <label for="description" class="block font-semibold">
          Description
        </label>
        <textarea
          id="description"
          name="description"
          rows="3"
          class="w-full rounded-lg border border-gray-700 bg-gray-800 px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        ></textarea>
      </div>

      <div class="flex items-center space-x-2">
        <input
          type="checkbox"
          id="is_public"
          name="is_public"
          class="h-4 w-4 rounded border-gray-600 bg-gray-800 text-indigo-500"
        />
        <label for="is_public" class="font-medium">Public Playlist</label>
      </div>

      <div class="flex items-center space-x-2">
        <input
          type="checkbox"
          id="is_collaborative"
          name="is_collaborative"
          disabled
          class="h-4 w-4 rounded border-gray-600 bg-gray-800 text-indigo-500 disabled:opacity-40"
        />
        <label for="is_collaborative" class="font-medium">
          Collaborative (only if public)
        </label>
      </div>

      <button type="submit" class="button button-primary w-full">
        Create Playlist
      </button>
    </form>
  </div>
}

<script>
  const isPublic = document.getElementById("is_public");
  const isCollaborative = document.getElementById("is_collaborative");

  isPublic.addEventListener("change", () => {
    if (isPublic.checked) {
      isCollaborative.disabled = false;
    } else {
      isCollaborative.checked = false;
      isCollaborative.disabled = true;
    }
  });
</script>
